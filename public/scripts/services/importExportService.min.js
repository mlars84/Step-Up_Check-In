googleAuthApp.service("importExportService",["$http","$mdDialog",function($http,$mdDialog){var self=this;self.interns=[],self.lastNameMatch={name:[]},self.internCSV=[],self.showAlert=function(message){$mdDialog.show($mdDialog.alert().clickOutsideToClose(!0).title(message).ariaLabel(message).ok("Ok"))},self.sendCSV=function(csv){var csvToPost={};csvToPost.fileContent=csv,$http.post("/private/sendCSV",csvToPost).then(function(response){self.importInterns(),console.log(response.data),self.showAlert(response.data)})},self.importInterns=function(){console.log("in importInterns function"),$http({method:"GET",url:"/private/importInterns"}).then(function(res){self.showAlert(res.data),console.log(res.data);for(var i=0;i<res.data.length;i++)console.log(res.data[i])})},self.exportResponseData=function(){console.log("in exportResponseData function"),$http({method:"GET",url:"/private/exportResponseData/"}).then(function(res){console.log(res.data),window.open("/private/exportResponseData/")})},self.searchByLastName=function(lastName){console.log("in searchByLastName",lastName),$http({method:"GET",url:"/private/searchByLastName/"+lastName}).then(function(res){console.log(res.data),self.lastNameMatch.name=[];for(var i=0;i<res.data.length;i++)console.log(res.data[i].last_name,lastName),res.data[i].last_name===lastName&&(self.lastNameMatch.name.push(res.data[i]),console.log("self.lastNameMatch =>",self.lastNameMatch))})},self.removeIntern=function(ev,primarykey,lastname){var confirm=$mdDialog.confirm().title("Would you like to remove this intern?").textContent("They will be permanently removed from the system.").ariaLabel("Lucky day").targetEvent(ev).ok("Please do it!").cancel("Cancel!");$mdDialog.show(confirm).then(function(){self.status="You deleted the intern.",$http({method:"DELETE",url:"/private/removeIntern",params:{primarykey:primarykey}}).then(function(res){console.log(res.data),self.searchByLastName(lastname),self.clearForm()})},function(){self.status="You decided to keep the intern."})},self.editPhone=function(primarykey,phone){console.log("in editPhone function =>",phone);var internToEdit={primarykey:primarykey,phone:phone};console.log(internToEdit),$http({method:"PUT",url:"/private/editPhone",data:internToEdit}).then(function(res){console.log("editPhone =>",res.data),self.phoneIn="",self.searchByLastName(),self.showAlert("New phone number saved!"),self.clearForm()})},self.clearForm=function(){clearForm.reset()}}]);