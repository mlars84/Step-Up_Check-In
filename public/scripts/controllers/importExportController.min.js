googleAuthApp.controller("importExportController",["importExportService",function(importExportService){function errorHandler(fileEvent){switch(fileEvent.target.error.code){case fileEvent.target.error.NOT_FOUND_ERR:alert("File Not Found!");break;case fileEvent.target.error.NOT_READABLE_ERR:alert("File is not readable");break;case fileEvent.target.error.ABORT_ERR:break;default:alert("An error occurred reading this file.")}}function updateProgress(fileEvent){if(fileEvent.lengthComputable){var percentLoaded=Math.round(fileEvent.loaded/fileEvent.total*100);percentLoaded<100&&(progress.style.width=percentLoaded+"%",progress.textContent="Importing data "+percentLoaded+"%")}}console.log("loaded importExportController");var reader,vm=this,progress=document.querySelector(".percent");vm.interns=importExportService.interns,vm.uploadInterns=importExportService.uploadInterns,vm.importInterns=importExportService.importInterns,vm.exportResponseData=importExportService.exportResponseData,vm.searchByLastName=importExportService.searchByLastName,vm.lastNameIn=importExportService.lastNameIn,vm.lastNameMatch=importExportService.lastNameMatch,vm.removeIntern=importExportService.removeIntern,vm.editPhone=importExportService.editPhone,vm.showConfirm=importExportService.showConfirm,vm.confirm=importExportService.confirm,document.getElementById("files").addEventListener("change",function(fileEvent){progress.style.width="0%",progress.textContent="Importing data 0%",(reader=new FileReader).onerror=errorHandler,reader.onprogress=updateProgress,reader.onabort=function(readerEvent){alert("File read cancelled")},reader.onloadstart=function(readerEvent){document.getElementById("progress_bar").className="loading"},reader.onload=function(readerEvent){progress.style.width="100%",progress.textContent="Importing data 100%",setTimeout("document.getElementById('progress_bar').className='';",2e3),importExportService.sendCSV(readerEvent.target.result)},reader.readAsText(fileEvent.target.files[0])},!1)}]);